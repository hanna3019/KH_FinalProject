<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	
	<resultMap type="Categories" id="serviceResult">
		<result column="cate_num" property="cateNum"/>
		<result column="service_num" property="serviceNum"/>
		<result column="name" property="name"/>	
	</resultMap>
	
	<resultMap type="Location" id="locationResult">
		<result column="city_num" property="cityNum"/>
		<result column="loc_num" property="locNum"/>
		<result column="city" property="city"/>	
	</resultMap>
	
	<select id="selectServiceList" resultMap="serviceResult">
		select *
		from categories
		where service_num = #{sNum}
	</select>
	
	<select id="selectLocationList" resultMap="locationResult">
		select *
		from city
		where loc_num = #{lNum}
	</select>
	
	<insert id="insertFreelancer">
		insert into freelancer
			   values(seq_free.nextval, #{name}, #{userId}, #{pass}, #{tel}, #{career}, #{gender}, #{serviceNum}, #{location}, 'F', 'Y')
	</insert>
	
	<insert id="insertCustomer">
  		insert into customer 
  				values(seq_cus.nextval, #{name},#{userId},  #{pass},  #{phone}, 'C', 'Y')
    </insert>
    
      <select  id ="idCheck" resultType="_int">
		    select count(*)
			from (select user_id
			from customer
			union all
			select user_id
			from freelancer)
			where user_id=#{checkId};
	</select>  
</mapper>
